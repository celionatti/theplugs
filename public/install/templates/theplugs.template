#!/usr/bin/env php
<?php

declare(strict_types=1);

/*
 |----------------------------------------------------------------------
 | Define Constants for the Console
 |----------------------------------------------------------------------
 */

use Plugs\Console\ConsoleKernel;
use Plugs\Console\ConsolePlugs;
use Plugs\Plugs;

define('BASE_PATH', __DIR__ . '/');
define('APP_PATH', BASE_PATH . 'app/');
define('CONFIG_PATH', BASE_PATH . 'config/');
define('STORAGE_PATH', BASE_PATH . 'storage/');
define('VENDOR_PATH', BASE_PATH . 'vendor/');

require VENDOR_PATH . 'autoload.php';

/*
 |----------------------------------------------------------------------
 | Load Environment Variables
 |----------------------------------------------------------------------
 */
$dotenv = Dotenv\Dotenv::createImmutable(BASE_PATH);
$dotenv->load();

/*
 |----------------------------------------------------------------------
 | Initialize Application
 |----------------------------------------------------------------------
 |
 | This bootstraps the application core, registers service providers,
 | and sets up the container.
 */
$app = new Plugs();

/*
 |----------------------------------------------------------------------
 | Run Console Application
 |----------------------------------------------------------------------
 */
$kernel = new ConsoleKernel();
$console = new ConsolePlugs($kernel);

exit($console->run($argv));
